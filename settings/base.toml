[server]
addr = "0.0.0.0"
port = 8080

[db]
host = "127.0.0.1"
port = 5_432
username = "username"
password = "password"
database_name = "database_name"
max_connections = 5

[redis]
username = "redis_user"
password = ""
host = "127.0.0.1"
port = 6_379
database_name = ""

[sentry]
key = "https://ceaa8e5d40646d02986f3afecf3807c7@o4507954772705280.ingest.de.sentry.io/4507954781356112"

[email]
username = "email_user"
password = "email_pass"
host = "127.0.0.1"
port = 1_025

[env]
RUST_LOG = "info"
[secret]
private_access_key = "static/key/private_access_rsa_key.pem"
public_access_key = "static/key/public_access_rsa_key.pem"
private_refresh_key = "static/key/private_refresh_rsa_key.pem"
public_refresh_key = "static/key/public_refresh_rsa_key.pem"

[worker]
failed_task_delay = 50

[http]
timeout = 10

# Streaming configuration for RTSP/WebRTC/HLS/MSE
[streaming]
enabled = true
default_protocol = "auto"

[streaming.source]
priority = ["fifo", "rtsp", "go2rtc"]
prefer_direct_rtsp = false
fallback_to_go2rtc = true
cache_sdp_seconds = 300

[streaming.zoneminder]
enabled = true
fifo_base_path = "/dev/shm"
video_fifo_suffix = "-v.fifo"
audio_fifo_suffix = "-a.fifo"
fifo_read_timeout_ms = 5000
reconnect_delay_ms = 1000

[streaming.go2rtc]
enabled = false
base_url = "http://localhost:1984"
timeout_seconds = 10
auto_register = true
health_check_interval_seconds = 30
retry_attempts = 3

[streaming.webrtc]
enabled = true
mode = "go2rtc"
max_connections = 100
connection_timeout_seconds = 30
stun_servers = ["stun:stun.l.google.com:19302", "stun:stun1.l.google.com:19302"]

[streaming.hls]
enabled = true
segment_duration_seconds = 2
playlist_size = 10
ll_hls_enabled = false
partial_segment_ms = 200

[streaming.hls.storage]
path = "/tmp/hls"
retention_minutes = 60

[streaming.mse]
enabled = true
mode = "native"
max_buffer_segments = 20
segment_duration_ms = 1000

[streaming.rtsp_proxy]
enabled = false
port = 8554
rtp_port_range_start = 20000
rtp_port_range_end = 30000
max_sessions = 100
transport = "auto"

